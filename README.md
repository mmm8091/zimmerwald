# Zimmerwald v1.2 "Less is More"

å›½é™…å…±äº§ä¸»ä¹‰è¿åŠ¨æƒ…æŠ¥ä»ªè¡¨ç›˜ï¼ˆIntelligence Dashboardï¼‰

## ğŸ“– ç®€ä»‹

Zimmerwald æ˜¯ä¸€ä¸ªè‡ªåŠ¨åŒ–çš„æ–°é—»èšåˆä¸åˆ†æå¹³å°ï¼Œä¸“æ³¨äºå›½é™…å…±äº§ä¸»ä¹‰è¿åŠ¨ç›¸å…³çš„æ–°é—»æŠ¥é“ã€‚v1.2 "Less is More" ç‰ˆæœ¬è¿›è¡Œäº†**å¤§é‡æ„**ï¼Œé€šè¿‡å¼•å…¥ç°ä»£åŒ–çš„è½»é‡çº§æ¡†æ¶ï¼ˆHonoã€Drizzle ORMã€Vue 3ï¼‰ï¼Œå¤§å¹…å‡å°‘æ ·æ¿ä»£ç ï¼Œæé«˜ AI å¯ç»´æŠ¤æ€§ã€‚

- ğŸ¤– **å”¯ç‰©ä¸»ä¹‰è¯„åˆ†ç³»ç»Ÿ**ï¼šåŸºäº"ç‰©è´¨åŠ›é‡"é‡‘å­—å¡”çš„ 0â€“100 åˆ†è¯„åˆ†
- ğŸŒ **åŒè¯­æƒ…æŠ¥**ï¼šä¸­è‹±æ–‡æ ‡é¢˜ä¸æ‘˜è¦ï¼Œé¢å‘å›½é™…è¯»è€…
- ğŸ·ï¸ **ä¸Šä¸‹æ–‡æ„ŸçŸ¥æ ‡ç­¾**ï¼šLLM ä¼˜å…ˆå¤ç”¨çƒ­é—¨æ ‡ç­¾ï¼Œå½¢æˆè‡ªå¢å¼ºè®°å¿†
- ğŸ‘¥ **ç¾¤ä¼—å®¡è®¡æœºåˆ¶**ï¼šç”¨æˆ·å¯å¯¹ AI è¯„åˆ†è¿›è¡ŒæŠ•ç¥¨åé¦ˆ
- ğŸ“Š **å¯è§†åŒ–ç­›é€‰**ï¼šç›´æ–¹å›¾ã€æ ‡ç­¾äº‘ã€åˆ†ç±»ç­›é€‰ï¼Œå¿«é€Ÿå®šä½é«˜ä»·å€¼æƒ…æŠ¥

> **å‘½åæ¥æº**ï¼šä»¥ 1915 å¹´é½é»˜å°”ç“¦å°”å¾·ä¼šè®®å‘½åï¼Œçºªå¿µå›½é™…å…±äº§ä¸»ä¹‰è¿åŠ¨çš„å›¢ç»“ä¼ ç»Ÿã€‚

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### v1.2 "Less is More" æ–°ç‰¹æ€§

- ğŸ¯ **æŠ€æœ¯æ ˆç°ä»£åŒ–**ï¼šä½¿ç”¨ Honoã€Drizzle ORMã€OpenAI SDKã€Vue 3 ç­‰æˆç†Ÿæ¡†æ¶
- ğŸ“‰ **ä»£ç ç²¾ç®€**ï¼šå¤§å¹…å‡å°‘æ ·æ¿ä»£ç ï¼Œæé«˜ AI å¯ç»´æŠ¤æ€§
- ğŸ¨ **Vue 3 å‰ç«¯**ï¼šä½¿ç”¨ Options API å®ç°å“åº”å¼ç•Œé¢
- ğŸ”„ **ç±»å‹å®‰å…¨**ï¼šDrizzle ORM æä¾›å®Œæ•´çš„ç±»å‹æ¨æ–­
- ğŸš€ **æ ‡å‡†åŒ–æ¶æ„**ï¼šéµå¾ªä¸šç•Œæ ‡å‡†æ¨¡å¼ï¼Œé™ä½ç»´æŠ¤æˆæœ¬

### åŸºç¡€åŠŸèƒ½

- ğŸ“° **å¤šæºèšåˆ**ï¼šè‡ªåŠ¨æŠ“å– 20+ ä¸ªå›½é™…å·¦ç¿¼æ–°é—»æºçš„ RSS è®¢é˜…
- ğŸ¤– **æ™ºèƒ½åˆ†æ**ï¼šä½¿ç”¨ DeepSeek / OpenRouter ç­‰ LLM æ¨¡å‹è¿›è¡Œæ–°é—»åˆ†æ
- ğŸ“Š **è‡ªåŠ¨åˆ†ç±»**ï¼šLabor / Politics / Conflict / Theory å››ç±»åˆ†ç±»
- ğŸ—„ï¸ **æ•°æ®å­˜å‚¨**ï¼šCloudflare D1ï¼ˆSQLiteï¼‰æŒä¹…åŒ–å­˜å‚¨
- ğŸŒ **å…¨çƒè®¿é—®**ï¼šåŸºäº Cloudflare Workers çš„è¾¹ç¼˜è®¡ç®—
- â° **å®šæ—¶æ›´æ–°**ï¼šæ¯ 10 åˆ†é’Ÿè‡ªåŠ¨æŠ“å–å’Œåˆ†ææœ€æ–°æ–°é—»

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js 18+ 
- npm æˆ– yarn
- Cloudflare è´¦æˆ·
- LLM API å¯†é’¥ï¼ˆDeepSeekã€OpenRouter ç­‰ï¼‰

### å®‰è£…æ­¥éª¤

1. **å…‹éš†ä»“åº“**

```bash
git clone https://github.com/yourusername/zimmerwald.git
cd zimmerwald
```

2. **å®‰è£…ä¾èµ–**

```bash
npm install
```

3. **åˆ›å»º D1 æ•°æ®åº“**

```bash
npm run db:create
```

å°†è¾“å‡ºçš„æ•°æ®åº“ ID å¤åˆ¶åˆ° `wrangler.toml` ä¸­çš„ `database_id` å­—æ®µã€‚

4. **åˆå§‹åŒ–æ•°æ®åº“**

```bash
# ä½¿ç”¨ SQL è¿ç§»æ–‡ä»¶ï¼ˆæ¨èï¼‰
npx wrangler d1 execute zimmerwald-db --remote --file=./migration_v1_2.sql

# æˆ–ä½¿ç”¨ Drizzle Kitï¼ˆå¦‚æœé…ç½®æ­£ç¡®ï¼‰
npm run db:migrate
```

5. **é…ç½®ç¯å¢ƒå˜é‡**

ä½¿ç”¨ Cloudflare Secrets è®¾ç½®ï¼š

```bash
npx wrangler secret put AI_API_KEY
npx wrangler secret put AI_API_BASE
npx wrangler secret put AI_MODEL_NAME
npx wrangler secret put AI_API_TYPE  # å¯é€‰ï¼Œé»˜è®¤ä¸º 'openai'
```

æˆ–åˆ›å»º `.dev.vars` æ–‡ä»¶ï¼ˆç”¨äºæœ¬åœ°å¼€å‘ï¼‰ï¼š

```env
AI_API_KEY=your-api-key
AI_API_BASE=https://api.deepseek.com
AI_MODEL_NAME=deepseek-reasoner
AI_API_TYPE=openai
```

6. **æœ¬åœ°å¼€å‘**

```bash
npm run dev
```

è®¿é—® `http://localhost:8787` æŸ¥çœ‹ç»“æœã€‚

7. **éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ**

```bash
npm run deploy
```

## ğŸ“š é…ç½®è¯´æ˜

### RSS æºé…ç½®

ç¼–è¾‘ `src/config/rss-sources.ts` æ¥æ·»åŠ ã€åˆ é™¤æˆ–å¯ç”¨/ç¦ç”¨ RSS æºã€‚

### è°ƒåº¦å™¨é…ç½®

ç¼–è¾‘ `src/config/scheduler.ts` æ¥è°ƒæ•´ï¼š
- æ¯æ¬¡è¿è¡Œå¤„ç†çš„æºæ•°é‡
- æ¯ä¸ªæºå¤„ç†çš„æ–‡ç« æ•°é‡
- å»¶è¿Ÿæ—¶é—´ï¼ˆé¿å… API é™æµï¼‰

### AI Prompt é…ç½®

ç¼–è¾‘ `src/config/prompts.ts` æ¥è°ƒæ•´ System Prompt å’Œ LLM é…ç½®ã€‚

## ğŸŒ API ç«¯ç‚¹

### ç”Ÿäº§ç«¯ç‚¹

- `GET /` - å‰ç«¯ Intelligence Dashboardï¼ˆVue 3 å•é¡µåº”ç”¨ï¼‰
- `GET /api/news` - è·å–æ–°é—»åˆ—è¡¨ï¼ˆJSONï¼‰
  - Query å‚æ•°ï¼š
    - `min_score`ï¼ˆå¯é€‰ï¼Œé»˜è®¤ 0ï¼‰ï¼šæœ€ä½è¯„åˆ†è¿‡æ»¤
    - `category`ï¼ˆå¯é€‰ï¼‰ï¼š`Labor` / `Politics` / `Conflict` / `Theory`
    - `tag`ï¼ˆå¯é€‰ï¼‰ï¼šæ ‡ç­¾æ¨¡ç³ŠåŒ¹é…ï¼ˆä¸­è‹±æ–‡ï¼‰
    - `limit`ï¼ˆå¯é€‰ï¼Œé»˜è®¤ 30ï¼‰ï¼šè¿”å›æ¡æ•°
- `POST /api/feedback` - ç¾¤ä¼—å®¡è®¡æŠ•ç¥¨
  - Body: `{ "article_id": 123, "vote_type": "too_high"|"accurate"|"too_low" }`

## ğŸ—„ï¸ æ•°æ®åº“ Schema (v1.2)

### `articles` è¡¨ï¼ˆæƒ…æŠ¥æ ¸å¿ƒï¼‰

```sql
CREATE TABLE articles (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  url TEXT UNIQUE NOT NULL,
  source_id TEXT NOT NULL,
  title_en TEXT NOT NULL,
  title_zh TEXT NOT NULL,
  summary_en TEXT,
  summary_zh TEXT,
  category TEXT,              -- Labor|Politics|Conflict|Theory
  tags TEXT,                  -- JSON: [{"en":"Strike","zh":"ç½¢å·¥"}]
  score INTEGER,              -- 0-100
  ai_reasoning TEXT,          -- AI è¯„åˆ†ç†ç”±
  published_at INTEGER NOT NULL,
  created_at INTEGER NOT NULL
);
```

### `feedback` è¡¨ï¼ˆç¾¤ä¼—å®¡è®¡ï¼‰

```sql
CREATE TABLE feedback (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  article_id INTEGER NOT NULL,
  vote_type TEXT NOT NULL,   -- too_high|accurate|too_low
  user_hash TEXT NOT NULL,    -- IP+UA å“ˆå¸ŒæŒ‡çº¹
  created_at INTEGER NOT NULL
);
```

å®Œæ•´ Schema å®šä¹‰è§ [`src/db/schema.ts`](./src/db/schema.ts)ï¼ˆä½¿ç”¨ Drizzle ORMï¼‰

## ğŸ”§ æŠ€æœ¯æ ˆ

### v1.2 æŠ€æœ¯æ ˆ

- **Web æ¡†æ¶**: [Hono](https://hono.dev/) - Cloudflare Workers çš„äº‹å®æ ‡å‡†
- **æ•°æ®åº“ ORM**: [Drizzle ORM](https://orm.drizzle.team/) - ç±»å‹å®‰å…¨ï¼Œæ— è¿è¡Œæ—¶å¼€é”€
- **AI SDK**: [OpenAI SDK](https://github.com/openai/openai-node) - æ ‡å‡†åŒ–æ¥å£ï¼Œè‡ªåŠ¨å¤„ç†æµå¼ä¼ è¾“
- **å‰ç«¯æ¡†æ¶**: [Vue 3](https://vuejs.org/) (CDN) - Options API é£æ ¼
- **Runtime**: Cloudflare Workers (TypeScript)
- **Database**: Cloudflare D1 (SQLite)
- **RSS Parser**: fast-xml-parser

### æ¶æ„æ¨¡å¼

- **æœåŠ¡å±‚åˆ†ç¦»**ï¼š`services/` ç›®å½•å°è£…æ‰€æœ‰ä¸šåŠ¡é€»è¾‘
- **ç±»å‹å®‰å…¨**ï¼šDrizzle ORM æä¾›å®Œæ•´çš„ç±»å‹æ¨æ–­
- **æ ‡å‡†åŒ–è·¯ç”±**ï¼šHono æä¾›æ ‡å‡†çš„è·¯ç”± API
- **æ•°æ®é©±åŠ¨è§†å›¾**ï¼šVue 3 å®ç°å“åº”å¼ç•Œé¢

## ğŸ“ é¡¹ç›®ç»“æ„ (v1.2)

```
zimmerwald/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ config/          # é…ç½®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ app.ts       # åº”ç”¨é…ç½®
â”‚   â”‚   â”œâ”€â”€ prompts.ts   # System Prompt é…ç½®
â”‚   â”‚   â”œâ”€â”€ rss-sources.ts  # RSS æºåˆ—è¡¨
â”‚   â”‚   â””â”€â”€ scheduler.ts # è°ƒåº¦å™¨é…ç½®
â”‚   â”œâ”€â”€ core/            # æ ¸å¿ƒå·¥å…·
â”‚   â”‚   â””â”€â”€ sources.ts   # æºæ ‡è¯†å·¥å…·
â”‚   â”œâ”€â”€ db/              # æ•°æ®åº“å®šä¹‰
â”‚   â”‚   â””â”€â”€ schema.ts   # Drizzle Schemaï¼ˆSingle Source of Truthï¼‰
â”‚   â”œâ”€â”€ frontend/        # å‰ç«¯
â”‚   â”‚   â””â”€â”€ html.ts      # Vue 3 å•é¡µåº”ç”¨
â”‚   â””â”€â”€ services/        # æœåŠ¡å±‚
â”‚       â”œâ”€â”€ ai.ts        # AI æœåŠ¡ï¼ˆOpenAI SDKï¼‰
â”‚       â”œâ”€â”€ db.ts        # æ•°æ®åº“æœåŠ¡ï¼ˆDrizzle ORMï¼‰
â”‚       â”œâ”€â”€ rss.ts       # RSS æœåŠ¡
â”‚       â””â”€â”€ types.ts     # ç±»å‹å®šä¹‰
â”œâ”€â”€ docs/
â”‚   â””â”€â”€ Zimmerwald v1.2 æ¶æ„è®¾è®¡è§„èŒƒ.md  # v1.2 æ¶æ„è®¾è®¡æ–‡æ¡£
â”œâ”€â”€ worker.ts            # Worker ä¸»å…¥å£ï¼ˆHono Appï¼‰
â”œâ”€â”€ drizzle.config.ts    # Drizzle Kit é…ç½®
â”œâ”€â”€ migration_v1_2.sql   # æ•°æ®åº“è¿ç§» SQL
â”œâ”€â”€ wrangler.toml        # Cloudflare Workers é…ç½®
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json
```

**æ¶æ„è¯´æ˜ï¼š**

- `worker.ts`ï¼šHono App å…¥å£ï¼Œå¤„ç†è·¯ç”±å’Œ Cron è°ƒåº¦
- `src/services/*`ï¼šæœåŠ¡å±‚ï¼Œå°è£…æ‰€æœ‰ä¸šåŠ¡é€»è¾‘
- `src/db/schema.ts`ï¼šæ•°æ®åº“ Schema å®šä¹‰ï¼ˆSingle Source of Truthï¼‰
- `src/frontend/html.ts`ï¼šVue 3 å‰ç«¯å•é¡µåº”ç”¨
- `src/config/*`ï¼šé›†ä¸­é…ç½®ç®¡ç†

è¯¦ç»†æ¶æ„è®¾è®¡è§ [`docs/Zimmerwald v1.2 æ¶æ„è®¾è®¡è§„èŒƒ.md`](./docs/Zimmerwald%20v1.2%20æ¶æ„è®¾è®¡è§„èŒƒ.md)

## ğŸ”„ ä» v1.1 å‡çº§åˆ° v1.2

v1.2 æ˜¯ä¸€ä¸ª**ç ´åæ€§é‡æ„**ï¼Œä¸»è¦å˜åŒ–ï¼š

1. **æŠ€æœ¯æ ˆå‡çº§**ï¼šHonoã€Drizzle ORMã€OpenAI SDKã€Vue 3
2. **æ•°æ®åº“è¿ç§»**ï¼šä½¿ç”¨ Drizzle Schema æ›¿ä»£ SQL æ–‡ä»¶
3. **ä»£ç ç²¾ç®€**ï¼šåˆ é™¤å¤§é‡æ ·æ¿ä»£ç ï¼Œä½¿ç”¨æ ‡å‡†åº“
4. **æ•°æ®é‡ç½®**ï¼šå»ºè®®æ¸…ç©ºæ•°æ®åº“é‡æ–°å¼€å§‹ï¼ˆå­—æ®µå‘½åé£æ ¼å˜åŒ–ï¼‰

å‡çº§æ­¥éª¤ï¼š

1. å¤‡ä»½ç°æœ‰æ•°æ®ï¼ˆå¦‚éœ€è¦ï¼‰
2. æ›´æ–°ä¾èµ–ï¼š`npm install`
3. è¿è¡Œæ•°æ®åº“è¿ç§»ï¼š`npx wrangler d1 execute zimmerwald-db --remote --file=./migration_v1_2.sql`
4. é‡æ–°éƒ¨ç½²ï¼š`npm run deploy`

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ï¼è¯·æŸ¥çœ‹ [CONTRIBUTING.md](CONTRIBUTING.md) äº†è§£å¦‚ä½•å‚ä¸é¡¹ç›®ã€‚

## ğŸ“„ è®¸å¯è¯

MIT License

## ğŸ™ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰ä¸ºå›½é™…å…±äº§ä¸»ä¹‰è¿åŠ¨æä¾›æ–°é—»çš„å·¦ç¿¼åª’ä½“å’Œç»„ç»‡ã€‚

## ğŸ”— ç›¸å…³é“¾æ¥

- [Cloudflare Workers æ–‡æ¡£](https://developers.cloudflare.com/workers/)
- [Hono æ–‡æ¡£](https://hono.dev/)
- [Drizzle ORM æ–‡æ¡£](https://orm.drizzle.team/)
- [Vue 3 æ–‡æ¡£](https://vuejs.org/)
- [DeepSeek API](https://platform.deepseek.com/)
- [OpenRouter](https://openrouter.ai/)

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [v1.2 æ¶æ„è®¾è®¡æ–‡æ¡£](./docs/Zimmerwald%20v1.2%20æ¶æ„è®¾è®¡è§„èŒƒ.md) - å®Œæ•´çš„æŠ€æœ¯æ ˆã€æ¶æ„ã€è®¾è®¡è§„èŒƒ
- [è´¡çŒ®æŒ‡å—](./CONTRIBUTING.md) - å¦‚ä½•å‚ä¸é¡¹ç›®å¼€å‘

---

**Zimmerwald v1.2 "Less is More"** - ä»¥ 1915 å¹´é½é»˜å°”ç“¦å°”å¾·ä¼šè®®å‘½åï¼Œçºªå¿µå›½é™…å…±äº§ä¸»ä¹‰è¿åŠ¨çš„å›¢ç»“ä¼ ç»Ÿã€‚
